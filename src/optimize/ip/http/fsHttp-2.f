fl

[ifndef test_getnumber
\ test_getnumber ( -- n1 t/f)
: test_getnumber
	parsenw
\						\ ( cstr/0 == - )
	dup
	if
\						\ ( cstr/0 == - )
		dup C@++ isnumber
\						\ ( cstr t/f == - )
		if
\						\ got a valid number
			C@++ number -1
\						\ ( n1 -1 == - )
		else
\						\ print an error message
			_udf dup .cstr cr
			0
\						\ ( cstr 0 == - )			
		then
	else
		0
\						\ ( 0 0 == - )			
	then
;

\ test_params ( -- n1 .. ncount count)
: test_params
	0 >r
\						\ ( == count )
	begin
		test_getnumber
\						\ ( ... n1/ctr -1/0 == count )
		if
						\ ( ... n1 == count )
			r> 1+ >r 0
						\ ( ... n1 0 == count+1 )
		else
\						\ ( ... -1 == count )
			drop -1
		then
	until
	r>
\						\ ( ... count == - )
;




\ fsAppendHex ( -- )
: fsAppendHex
	base W@ hex
	begin
		accept
		0 >in W!
		test_params dup
		if
			dup t0 W! 0
			do
				t0 W@ i - pad + C!
			loop
			t0 W@ pad C!
			pad fsAppend
			0
		else
			drop -1
		then
	until
	base W!
;
]
fswrite test.png
...
fsAppendHex
89 50 4E 47 0D 0A 1A 0A 00 00 00 0D 49 48 44 52
00 00 00 64 00 00 00 64 08 02 00 00 00 FF 80 02
03 00 00 00 01 73 52 47 42 00 AE CE 1C E9 00 00
00 04 67 41 4D 41 00 00 B1 8F 0B FC 61 05 00 00
00 20 63 48 52 4D 00 00 7A 26 00 00 80 84 00 00
FA 00 00 00 80 E8 00 00 75 30 00 00 EA 60 00 00
3A 98 00 00 17 70 9C BA 51 3C 00 00 01 BC 49 44
41 54 78 5E ED DD C1 92 82 30 10 45 51 E7 FF 3F
1A 83 0B C7 C2 4C 91 EE 69 48 89 87 72 65 A5 23
5E DE 4D 02 8B F0 B3 2C CB CD 31 48 A0 C1 72 0C
12 B8 0D B6 D3 6C 55 10 85 71 02 60 8D B3 EA 25
6B 70 B0 BB 7C B3 77 8A 9D 64 AD 14 DA 0C F9 E5
9F 06 E0 ED 00 EB 8F 58 80 15 D0 05 2C B0 8E 19
5E 25 4B B2 24 6B FA C2 85 86 FF D5 30 50 3F FD
6A 9F 79 02 92 15 48 46 17 56 A0 FE CC 0B 3B FD
B7 AA 92 15 B8 4F FF 84 A6 FD B8 54 C2 3A 66 BE
9E 90 A7 F5 91 5E EF CF 80 D5 C1 02 56 20 A1 60
81 75 CC BC 2D 59 92 25 59 D3 97 20 34 A4 21 0D
69 18 B0 00 2C B0 7E 33 B0 3E 4A 98 9E 88 AA 13
30 1B 06 AE 25 58 60 59 3A 54 0D 3D E9 7E 68 48
43 1A A6 F5 A9 2A A4 21 0D 69 58 65 53 BA 1F 1A
D2 90 86 69 7D AA 0A 69 48 43 1A 56 D9 94 EE 87
86 34 A4 61 5A 9F AA 42 1A D2 90 86 55 36 A5 FB
A1 21 0D 69 98 D6 A7 AA 90 86 34 A4 61 95 4D E9
7E 68 48 43 1A A6 F5 A9 2A A4 21 0D 69 58 65 53
BA 1F 1A D2 90 86 69 7D AA 0A 69 48 43 1A 56 D9
94 EE 87 86 34 A4 61 5A 9F AA C2 33 34 FC 84 AD
40 06 CF F1 D8 4D 30 8E F1 A1 2A 2A 45 FD B4 6E
6C BD 39 7A A5 C1 1A 25 D5 66 53 B0 C0 2A 1A A4
36 6B 33 C9 92 2C C9 0A DC B0 80 05 56 60 C8 00
EB A2 B0 5E DF B9 F0 58 A1 6D 8F EE 97 D7 7A 53
C3 D0 ED CE A6 51 8B 43 AF EC 1B DF 14 B2 FF 9F
C1 7A 66 05 AC C1 07 39 8F 3D 65 76 DB 4A 96 64
ED 86 A4 D3 40 B2 02 D4 C0 02 2B 40 20 D0 54 B2
C0 0A 10 08 34 95 AC 00 AC 3B 4E 23 73 BD BC 90
55 0D 00 00 00 00 49 45 4E 44 AE 42 60 82

fswrite favicon.ico
...
fsAppendHex
00 00 01 00 01 00 20 20 00 00 01 00 08 00 A8 08
00 00 16 00 00 00 28 00 00 00 20 00 00 00 40 00
00 00 01 00 08 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 80 00 00 80 00 00 00 80 80 00 80 00
00 00 80 00 80 00 80 80 00 00 C0 C0 C0 00 C0 DC
C0 00 F0 CA A6 00 33 00 00 04 00 00 33 04 33 00
33 04 33 33 00 04 16 16 16 04 1C 1C 1C 04 22 22
22 04 29 29 29 04 55 55 55 04 4D 4D 4D 04 42 42
42 04 39 39 39 04 80 7C FF 04 50 50 FF 04 93 00
D6 04 FF EC CC 04 C6 D6 EF 04 D6 E7 E7 04 90 A9
AD 04 00 FF 33 04 00 00 66 04 00 00 99 04 00 00
CC 04 00 33 00 04 00 33 33 04 00 33 66 04 00 33
99 04 00 33 CC 04 00 33 FF 04 00 66 00 04 00 66
33 04 00 66 66 04 00 66 99 04 00 66 CC 04 00 66
FF 04 00 99 00 04 00 99 33 04 00 99 66 04 00 99
99 04 00 99 CC 04 00 99 FF 04 00 CC 00 04 00 CC
33 04 00 CC 66 04 00 CC 99 04 00 CC CC 04 00 CC
FF 04 00 FF 66 04 00 FF 99 04 00 FF CC 04 33 FF
00 04 FF 00 33 04 33 00 66 04 33 00 99 04 33 00
CC 04 33 00 FF 04 FF 33 00 04 33 33 33 04 33 33
66 04 33 33 99 04 33 33 CC 04 33 33 FF 04 33 66
00 04 33 66 33 04 33 66 66 04 33 66 99 04 33 66
CC 04 33 66 FF 04 33 99 00 04 33 99 33 04 33 99
66 04 33 99 99 04 33 99 CC 04 33 99 FF 04 33 CC
00 04 33 CC 33 04 33 CC 66 04 33 CC 99 04 33 CC
CC 04 33 CC FF 04 33 FF 33 04 33 FF 66 04 33 FF
99 04 33 FF CC 04 33 FF FF 04 66 00 00 04 66 00
33 04 66 00 66 04 66 00 99 04 66 00 CC 04 66 00
FF 04 66 33 00 04 66 33 33 04 66 33 66 04 66 33
99 04 66 33 CC 04 66 33 FF 04 66 66 00 04 66 66
33 04 66 66 66 04 66 66 99 04 66 66 CC 04 66 99
00 04 66 99 33 04 66 99 66 04 66 99 99 04 66 99
CC 04 66 99 FF 04 66 CC 00 04 66 CC 33 04 66 CC
99 04 66 CC CC 04 66 CC FF 04 66 FF 00 04 66 FF
33 04 66 FF 99 04 66 FF CC 04 CC 00 FF 04 FF 00
CC 04 99 99 00 04 99 33 99 04 99 00 99 04 99 00
CC 04 99 00 00 04 99 33 33 04 99 00 66 04 99 33
CC 04 99 00 FF 04 99 66 00 04 99 66 33 04 99 33
66 04 99 66 99 04 99 66 CC 04 99 33 FF 04 99 99
33 04 99 99 66 04 99 99 99 04 99 99 CC 04 99 99
FF 04 99 CC 00 04 99 CC 33 04 66 CC 66 04 99 CC
99 04 99 CC CC 04 99 CC FF 04 99 FF 00 04 99 FF
33 04 99 CC 66 04 99 FF 99 04 99 FF CC 04 99 FF
FF 04 CC 00 00 04 99 00 33 04 CC 00 66 04 CC 00
99 04 CC 00 CC 04 99 33 00 04 CC 33 33 04 CC 33
66 04 CC 33 99 04 CC 33 CC 04 CC 33 FF 04 CC 66
00 04 CC 66 33 04 99 66 66 04 CC 66 99 04 CC 66
CC 04 99 66 FF 04 CC 99 00 04 CC 99 33 04 CC 99
66 04 CC 99 99 04 CC 99 CC 04 CC 99 FF 04 CC CC
00 04 CC CC 33 04 CC CC 66 04 CC CC 99 04 CC CC
CC 04 CC CC FF 04 CC FF 00 04 CC FF 33 04 99 FF
66 04 CC FF 99 04 CC FF CC 04 CC FF FF 04 CC 00
33 04 FF 00 66 04 FF 00 99 04 CC 33 00 04 FF 33
33 04 FF 33 66 04 FF 33 99 04 FF 33 CC 04 FF 33
FF 04 FF 66 00 04 FF 66 33 04 CC 66 66 04 FF 66
99 04 FF 66 CC 04 CC 66 FF 04 FF 99 00 04 FF 99
33 04 FF 99 66 04 FF 99 99 04 FF 99 CC 04 FF 99
FF 04 FF CC 00 04 FF CC 33 04 FF CC 66 04 FF CC
99 04 FF CC CC 04 FF CC FF 04 FF FF 33 04 CC FF
66 04 FF FF 99 04 FF FF CC 04 66 66 FF 04 66 FF
66 04 66 FF FF 04 FF 66 66 04 FF 66 FF 04 FF FF
66 04 21 00 A5 04 5F 5F 5F 04 77 77 77 04 86 86
86 04 96 96 96 04 CB CB CB 04 B2 B2 B2 04 D7 D7
D7 04 DD DD DD 04 E3 E3 E3 04 EA EA EA 04 F1 F1
F1 04 F8 F8 F8 04 F0 FB FF 00 A4 A0 A0 00 80 80
80 00 00 00 FF 00 00 FF 00 00 00 FF FF 00 FF 00
00 00 FF 00 FF 00 FF FF 00 00 FF FF FF 00 FF FF
F9 F9 F9 F9 FF FF FF FF FF FF FF FF FF FF FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
F9 F9 F9 F9 FF FF FF FF FF FF FF FF FF FF FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
F9 F9 F9 F9 FF FF FF FF FF FF FF FF FF FF FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
F9 F9 F9 F9 FF FF FF FF FF FF FF FF FF FF FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
F9 F9 F9 F9 FF FF FF FF FF FF FF FF FF FF FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
F9 F9 F9 F9 FF FF FF FF FF FF FF FF FF FF FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
F9 F9 F9 F9 FF FF FF FF FF FF FF FF FF FF FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
F9 F9 F9 F9 FF FF FF FF FF FF FF FF FF FF FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
F9 F9 F9 F9 FF FF FF FF FF FF FF FF FF FF FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
F9 F9 F9 F9 FF FF FF FF FF FF FF FF FF FF FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
F9 F9 F9 F9 FF FF F9 F9 F9 F9 FF FF FF FF FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
F9 F9 F9 F9 FF FF F9 F9 F9 F9 FF FF FF FF FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
F9 F9 F9 F9 F9 F9 F9 F9 F9 F9 F9 F9 FF FF FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
F9 F9 F9 F9 F9 F9 F9 F9 F9 F9 F9 F9 FF FF FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
F9 F9 F9 F9 FF FF FF FF FF FF F9 F9 F9 F9 FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
F9 F9 F9 F9 FF FF FF FF FF FF F9 F9 F9 F9 FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
F9 F9 F9 F9 FF FF FF FF FF FF F9 F9 F9 F9 FF FF
FC FC FC FC FC FC FC FC FC FC FC FC FF FF FF FF
F9 F9 F9 F9 FF FF FF FF FF FF F9 F9 F9 F9 FF FF
FC FC FC FC FC FC FC FC FC FC FC FC FF FF FF FF
F9 F9 F9 F9 FF FF FF FF FF FF F9 F9 F9 F9 FF FF
FC FC FC FC FC FC FC FC FC FC FC FC FF FF FF FF
F9 F9 F9 F9 FF FF FF FF FF FF F9 F9 F9 F9 FF FF
FC FC FC FC FC FC FC FC FC FC FC FC FF FF FF FF
F9 F9 F9 F9 FF FF FF FF FF FF F9 F9 F9 F9 FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
F9 F9 F9 F9 FF FF FF FF FF FF F9 F9 F9 F9 FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
F9 F9 F9 F9 F9 F9 F9 F9 F9 F9 F9 F9 FF FF FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
F9 F9 F9 F9 F9 F9 F9 F9 F9 F9 F9 F9 FF FF FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
F9 F9 FF FF FF FF F9 F9 F9 F9 FF FF FF FF FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
F9 F9 FF FF FF FF F9 F9 F9 F9 FF FF FF FF FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF
FC FC FC FC FF FF FF FF FF FF FF FF FF FF FF FF
FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF
FC FC FC FC FC FC FC FC FC FC FC FC FC FC FF FF
FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF
FC FC FC FC FC FC FC FC FC FC FC FC FC FC FF FF
FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF
FC FC FC FC FC FC FC FC FC FC FC FC FC FC FF FF
FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF
FC FC FC FC FC FC FC FC FC FC FC FC FC FC 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00




